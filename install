#!/usr/bin/env bash

DOT_FILES=$(cd $(dirname "${BASH_SOURCE[0]}") && pwd)
CONFIG_PATH=$HOME/.config

##############################
# Add fonts manually for now #
##############################

# Bash
if [ -f $HOME/.bashrc ]; then
	rm $HOME/.bashrc
fi
if [ -f $HOME/.bash_profile ]; then
	rm $HOME/.bash_profile
fi
if [ -f $HOME/.bash_logout ]; then
	rm $HOME/.bash_logout
fi

ln -sf $DOT_FILES/bash/.bashrc $HOME/.bashrc
ln -sf $DOT_FILES/bash/.bash_profile $HOME/.bash_profile
ln -sf $DOT_FILES/bash/.bash_logout $HOME/.bash_logout

# tmux
if [ -f $HOME/.tmux.conf ]; then
	rm $HOME/.tmux.conf
fi
ln -sf $DOT_FILES/tmux/tmux.conf $HOME/.tmux.conf

# Kitty
if [ -d $CONFIG_PATH/kitty ]; then
	rm -rf $CONFIG_PATH/kitty
fi
ln -sf $DOT_FILES/kitty $CONFIG_PATH

# Scripts
mkdir -p $HOME/.local/bin
ln -sf $DOT_FILES/scripts/t $HOME/.local/bin/t

# Brew
sh -c "$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/install/master/install.sh)"
test -d ~/.linuxbrew && eval "$(~/.linuxbrew/bin/brew shellenv)"
test -d /home/linuxbrew/.linuxbrew && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
test -r ~/.bash_profile && echo "eval \"\$($(brew --prefix)/bin/brew shellenv)\"" >> ~/.bash_profile
brew vendor-install ruby
brew install gcc

# Install multiple php
brew tap shivammathur/php
brew install shivammathur/php/php@8.2
brew install shivammathur/php/php@8.1
brew install shivammathur/php/php@8.0
brew install shivammathur/php/php@7.4
brew install shivammathur/php/php@7.3
brew install shivammathur/php/php@5.6

sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@5.6/bin/php /usr/local/bin/php56
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@7.3/bin/php /usr/local/bin/php73
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@7.4/bin/php /usr/local/bin/php74
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@8.0/bin/php /usr/local/bin/php80
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@8.1/bin/php /usr/local/bin/php81
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@8.2/bin/php /usr/local/bin/php82
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@8.2/bin/php /usr/local/bin/php82
# Current php
sudo ln -sf /home/linuxbrew/.linuxbrew/opt/php@8.2/bin/php /usr/local/bin/php

# yt-dlp
mkdir -p $HOME/.config/yt-dlp
ln -sf $DOT_FILES/yt-dlp/config $HOME/.config/yt-dlp/config
ln -sf $DOT_FILES/yt-dlp/laracasts.config $HOME/.config/yt-dlp/laracasts.config

# phpactor for nvim
yay -S phpactor

# NeoVim
if [ -d $CONFIG_PATH/nvim ]; then
	rm -rf $CONFIG_PATH/nvim
fi
ln -sf $DOT_FILES/nvim $CONFIG_PATH
